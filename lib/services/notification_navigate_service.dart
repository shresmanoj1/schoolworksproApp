import 'package:firebase_messaging/firebase_messaging.dart';import 'package:flutter/services.dart';import 'package:provider/provider.dart';import 'package:schoolworkspro_app/common_view_model.dart';import 'package:schoolworkspro_app/main/main.dart';import '../helper/local_notification_service.dart';import '../helper/navigation_handler.dart';import '../response/notification_response.dart';class NotificationRoute{  static NavigationNavigateService(context){    late CommonViewModel _commonViewModel;    _commonViewModel = Provider.of<CommonViewModel>(context, listen: false);    _commonViewModel.fetchNotifications();    // FirebaseMessaging.onBackgroundMessage(backgroundHandler);    SystemChrome.setPreferredOrientations(        [DeviceOrientation.portraitUp, DeviceOrientation.portraitDown]);    FirebaseMessaging.instance.getInitialMessage().then((message) {      final routeFromMessage = message?.data["path"];      if (message != null) {        _commonViewModel.setDot(true);        notificationClickHandler(context, Notificationss(          path: routeFromMessage,        ));      }    });    //foreground message    FirebaseMessaging.onMessage.listen((message) {      if (message.notification != null) {        _commonViewModel.setDot(true);        _commonViewModel.fetchNotice();        final routeFromMessage = message.data["path"];      }      LocalNotificationService.display(message, context);    });    //when app is in background and user taps    FirebaseMessaging.onMessageOpenedApp.listen((message) {      final routeFromMessage = message.data["path"];      if(message != null){        _commonViewModel.setDot(true);        _commonViewModel.fetchNotice();        notificationClickHandler(context, Notificationss(          path: routeFromMessage,        ));      }    });  }}