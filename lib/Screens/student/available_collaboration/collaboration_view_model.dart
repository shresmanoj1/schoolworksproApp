import 'dart:convert';import 'package:flutter/material.dart';import 'package:schoolworkspro_app/response/available_collaboration_response.dart';import 'package:schoolworkspro_app/response/collaboration_group_response.dart';import 'package:schoolworkspro_app/response/lecturer/getstudentformarking_response.dart';import '../../../api/api_response.dart';import '../../../api/repositories/collaboration_repo.dart';import '../../../response/collaboration_task_group_response.dart';import '../../../response/lecturer/getbatch_response.dart';import '../../../response/module_group_collaboration.dart';import '../../../response/task_item_response.dart';class CollaborationViewModel extends ChangeNotifier {  ApiResponse _availableCollaborationApiResponse =      ApiResponse.initial("Empty Data");  ApiResponse get availableCollaborationApiResponse =>      _availableCollaborationApiResponse;  ModuleGroupCollaboration _availableCollaboration =      ModuleGroupCollaboration();  ModuleGroupCollaboration get availableCollaboration =>      _availableCollaboration;  Future<void> fetchAvailableCollaboration(String id) async {    _availableCollaborationApiResponse =        ApiResponse.initial("Loading");    notifyListeners();    try {      ModuleGroupCollaboration res =          await CollaborationRepository().getAvailableCollaboration(id);      if (res.success == true) {        _availableCollaboration = res;        _availableCollaborationApiResponse =            ApiResponse.completed(res.success.toString());        notifyListeners();      } else {        _availableCollaborationApiResponse =            ApiResponse.error(res.success.toString());      }    } catch (e) {      print("VM CATCH ERRe :: $e");      _availableCollaborationApiResponse =          ApiResponse.error(e.toString());    }    notifyListeners();  }  ApiResponse _createGroupApiResponse =      ApiResponse.initial("Empty Data");  ApiResponse get createGroupApiResponse => _createGroupApiResponse;  CollaborationGroupResponse _createGroup =      CollaborationGroupResponse();  CollaborationGroupResponse get createGroup => _createGroup;  Future<void> fetchGroupTask(String id) async {    _createGroupApiResponse = ApiResponse.initial("Loading");    notifyListeners();    try {      CollaborationGroupResponse res =          await CollaborationRepository().getGroup(id);      if (res.success == true) {        _createGroup = res;        _createGroupApiResponse = ApiResponse.completed(res.success.toString());        notifyListeners();      } else {        _createGroupApiResponse =            ApiResponse.error(res.success.toString());      }    } catch (e) {      print("VM CATCH ERRe :: $e");      _createGroupApiResponse = ApiResponse.error(e.toString());    }    notifyListeners();  }  ApiResponse _allTaskApiResponse = ApiResponse.initial("Empty Data");  ApiResponse get allTaskApiResponse => _allTaskApiResponse;  CollaborationTaskGroup _allTask = CollaborationTaskGroup();  CollaborationTaskGroup get allTask => _allTask;  Future<void> fetchAllTask(String id) async {    _allTaskApiResponse = ApiResponse.initial("Loading");    notifyListeners();    try {      CollaborationTaskGroup res =          await CollaborationRepository().getAllTask(id);      if (res.success == true) {        _allTask = res;        _allTaskApiResponse =            ApiResponse.completed(res.success.toString());        notifyListeners();      } else {        _allTaskApiResponse =            ApiResponse.error(res.success.toString());      }    } catch (e) {      print("VM CATCH ERRe :: $e");      _allTaskApiResponse = ApiResponse.error(e.toString());    }    notifyListeners();  }  ApiResponse _assignmentBatchApiResponse =      ApiResponse.initial("Empty Data");  ApiResponse get assignmentBatchApiResponse =>      _assignmentBatchApiResponse;  GetBatchResponse _assignmentBatch = GetBatchResponse();  GetBatchResponse get assignmentBatch => _assignmentBatch;  Future<void> fetchAssignmentBatch(String id) async {    _assignmentBatchApiResponse = ApiResponse.initial("Loading");    notifyListeners();    try {      GetBatchResponse res =          await CollaborationRepository().getAssignmentBatch(id);      if (res.success == true) {        _assignmentBatch = res;        _assignmentBatchApiResponse =            ApiResponse.completed(res.success.toString());        notifyListeners();      } else {        _assignmentBatchApiResponse =            ApiResponse.error(res.success.toString());      }    } catch (e) {      print("VM CATCH ERRe :: $e");      _assignmentBatchApiResponse = ApiResponse.error(e.toString());    }    notifyListeners();  }  ApiResponse _taskItemApiResponse = ApiResponse.initial("Empty Data");  ApiResponse get taskItemApiResponse => _taskItemApiResponse;  TaskItemResponse _taskItem = TaskItemResponse();  TaskItemResponse get taskItem => _taskItem;  Future<void> fetchTaskItem(String id) async {    _taskItemApiResponse = ApiResponse.initial("Loading");    notifyListeners();    try {      TaskItemResponse res =      await CollaborationRepository().getTaskItem(id);      if (res.success == true) {        _taskItem = res;        _taskItemApiResponse =            ApiResponse.completed(res.success.toString());        notifyListeners();      } else {        _taskItemApiResponse =            ApiResponse.error(res.success.toString());      }    } catch (e) {      print("VM CATCH ERRe :: $e");      _taskItemApiResponse = ApiResponse.error(e.toString());    }    notifyListeners();  }}