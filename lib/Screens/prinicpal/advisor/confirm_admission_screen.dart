import 'package:dropdown_search/dropdown_search.dart';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:fluttertoast/fluttertoast.dart';import 'package:schoolworkspro_app/api/repositories/principal/advisor_repo.dart';import 'package:schoolworkspro_app/request/confirm_admission_request.dart';import 'package:schoolworkspro_app/request/referral_details_request.dart';class ConfirmAdmission extends StatefulWidget {  final id;  const ConfirmAdmission({    Key? key,    this.id,  }) : super(key: key);  @override  _ConfirmAdmissionState createState() => _ConfirmAdmissionState();}class _ConfirmAdmissionState extends State<ConfirmAdmission> {  TextEditingController discountAssignController = TextEditingController();  String? dropdownValue;  @override  void initState() {    super.initState();  }  @override  Widget build(BuildContext context) {    return Scaffold(        appBar: AppBar(          title: const Text(            "Admission",            style: TextStyle(color: Colors.black),          ),          backgroundColor: Colors.white,          elevation: 0.0,          iconTheme: const IconThemeData(color: Colors.black),        ),        body: Padding(          padding: const EdgeInsets.symmetric(horizontal: 10),          child: CustomScrollView(slivers: [            SliverFillRemaining(              hasScrollBody: false,              child: Column(                crossAxisAlignment: CrossAxisAlignment.start,                children: [                  const Text(                    "Are you sure you want to admit this student?",                    style: TextStyle(fontSize: 16),                  ),                  const SizedBox(                    height: 10,                  ),                  const Text('Discount Assign *'),                  const SizedBox(                    height: 5,                  ),                  TextFormField(                    controller: discountAssignController,                    keyboardType: TextInputType.number,                    decoration: const InputDecoration(                      enabledBorder: OutlineInputBorder(                          borderSide: BorderSide(color: Colors.grey)),                      focusedBorder: OutlineInputBorder(                          borderSide: BorderSide(color: Colors.green)),                      floatingLabelBehavior: FloatingLabelBehavior.always,                    ),                  ),                  SizedBox(                    height: 10,                  ),                  Row(                    mainAxisAlignment: MainAxisAlignment.center,                    children: [                      Padding(                        padding: const EdgeInsets.symmetric(horizontal: 8.0),                        child: ElevatedButton(                            onPressed: () async {                              if (discountAssignController.text.isEmpty) {                                Fluttertoast.showToast(                                  msg: "Please enter discount assign",                                  toastLength: Toast.LENGTH_SHORT,                                  gravity: ToastGravity.BOTTOM,                                  timeInSecForIosWeb: 1,                                  backgroundColor: Colors.red,                                  textColor: Colors.white,                                  fontSize: 16.0,                                );                              } else {                                final request = ConfirmAdmissionRequest(                                    discount: discountAssignController.text,                                    admission: "Admitted");                                print(request);                                final ress = await AdvisorRepository()                                    .postReferralDetails(request, widget.id);                                if (ress.success == true) {                                  Fluttertoast.showToast(msg: "submitted");                                  Navigator.pop(context);                                } else {                                  Fluttertoast.showToast(msg: "Error");                                }                              }                            },                            style: ButtonStyle(                              backgroundColor:                                  MaterialStateProperty.all(Colors.blue),                            ),                            child: const Text('Admit')),                      ),                      Padding(                        padding: const EdgeInsets.symmetric(horizontal: 8.0),                        child: ElevatedButton(                            onPressed: () async {                              Navigator.pop(context);                            },                            style: ButtonStyle(                              backgroundColor:                                  MaterialStateProperty.all(Colors.black),                            ),                            child: const Text('Cancel')),                      )                    ],                  )                ],              ),            )          ]),        ));  }}