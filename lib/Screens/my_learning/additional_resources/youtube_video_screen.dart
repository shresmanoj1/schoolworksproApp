import 'package:flutter/material.dart';import 'package:provider/provider.dart';import 'package:schoolworkspro_app/Screens/my_learning/additional_resources/additional_resources_view_model.dart';import 'package:schoolworkspro_app/components/shimmer.dart';import 'package:url_launcher/url_launcher.dart';import '../../../config/api_response_config.dart';class YoutubeVideoScreen extends StatefulWidget {  final lessonSlug;  const YoutubeVideoScreen({Key? key, required this.lessonSlug})      : super(key: key);  @override  State<YoutubeVideoScreen> createState() =>      _YoutubeVideoScreenState();}class _YoutubeVideoScreenState extends State<YoutubeVideoScreen> {  late AdditionalResourcesViewModel additionalResourcesViewModel;  @override  void initState() {    WidgetsBinding.instance.addPostFrameCallback((timeStamp) {      additionalResourcesViewModel =          Provider.of<AdditionalResourcesViewModel>(context,              listen: false);      additionalResourcesViewModel          .fetchYoutubeLinks(widget.lessonSlug);    });    super.initState();  }  Future<void> refreshData() async {    additionalResourcesViewModel        .fetchYoutubeLinks(widget.lessonSlug);  }  @override  Widget build(BuildContext context) {    return Scaffold(        appBar: AppBar(          elevation: 0.0,          iconTheme: const IconThemeData(color: Colors.black),          backgroundColor: Colors.white,          title: const Text(            "Youtube",            style: TextStyle(color: Colors.black),          ),        ),        body: Consumer<AdditionalResourcesViewModel>(            builder: (context, getYoutubeLinks, child) {          return isLoading(                  getYoutubeLinks.additionalResourcesResponse)              ? ListView.builder(                  itemCount: 4,                  itemBuilder: (BuildContext context, int index) {                    return Column(                      children: const [                        VerticalLoader(),                        SizedBox(height: 5),                      ],                    );                  })              : RefreshIndicator(onRefresh: ()=> refreshData(), child: Padding(                  padding: const EdgeInsets.symmetric(                      horizontal: 10, vertical: 10),                  child: ListView.builder(                    itemCount: getYoutubeLinks.youtube.length,                    itemBuilder: (BuildContext context, int index) {                      return Card(                          elevation: 2.0,                          clipBehavior: Clip.antiAlias,                          child: Padding(                              padding: const EdgeInsets.symmetric(                                  horizontal: 10, vertical: 10),                              child: Column(                                crossAxisAlignment:                                    CrossAxisAlignment.start,                                children: [                                  InkWell(onTap: (){                                    launch(                                        getYoutubeLinks                                            .youtube[index].link.toString());                                  }, child: Image.network(getYoutubeLinks                                      .youtube[index].image!)),                                  Row(                                    mainAxisAlignment:                                        MainAxisAlignment                                            .spaceBetween,                                    children: [                                      Text(getYoutubeLinks                                          .youtube[index].date                                          .toString()),                                      Text(getYoutubeLinks                                          .youtube[index].views                                          .toString()),                                    ],                                  ),                                  SizedBox(height: 5,),                                  InkWell(onTap: (){                                    launch(                                        getYoutubeLinks                                            .youtube[index].link.toString());                                  }, child: Text(                                    getYoutubeLinks                                        .youtube[index].title                                        .toString(),                                    style: TextStyle(                                        fontSize: 16,                                        ),                                  )),                                  // Text(getYoutubeLinks                                  //     .youtube[index].link                                  //     .toString()),                                  SizedBox(height: 5,),                                ],                              )));                    },                  ),                ));          ;        }));  }}